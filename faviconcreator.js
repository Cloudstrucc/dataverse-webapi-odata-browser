// This code creates the public/images directory and adds a basic logo.png and favicon.ico
const fs = require('fs');
const path = require('path');

// Create the public/images directory if it doesn't exist
const imagesDir = path.join(__dirname, 'public', 'images');
if (!fs.existsSync(imagesDir)) {
  fs.mkdirSync(imagesDir, { recursive: true });
  console.log(`Created directory: ${imagesDir}`);
}

// Basic SVG Power Apps logo as a string
const logoSvg = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96" width="200" height="200">
  <path fill="#742774" d="M0,12.4V83.6c0,0.4,0.4,0.7,0.5,0.7c0.4,0.3,13.7,11.2,24.8,11.2c7.7,0,12-5.3,12-14.9V15.4 c0-0.8-0.8-1.6-1.6-1.6h-9.4c-0.8,0-1.6,0.8-1.6,1.6V80c0,3.9-1,5.9-4.5,5.9c-3.9,0-10.1-3-15.7-6.8c-0.3-0.2-0.4-0.6-0.4-0.9 V12.4c0-0.8-0.8-1.6-1.6-1.6H1.9C0.9,10.8,0,11.7,0,12.4z"/>
  <path fill="#742774" d="M60.5,15.4V58c0,9.6,4.1,14.9,11.7,14.9c11.2,0,24.3-10.8,24.8-11.2c0.3-0.2,0.5-0.4,0.5-0.9V12.4 c0-0.8-0.8-1.6-1.6-1.6H86c-0.8,0-1.6,0.8-1.6,1.6v65.7c0,0.3-0.2,0.7-0.4,0.9c-5.5,3.7-11.5,6.7-15.5,6.7 c-3.5,0-4.1-2.1-4.1-5.9V15.4c0-0.8-0.8-1.6-1.6-1.6h-0.6C61.4,13.8,60.5,14.5,60.5,15.4z"/>
  <path fill="#742774" d="M52.6,54.6V9.5c0-0.8-0.8-1.6-1.6-1.6h-5.9c-0.8,0-1.6,0.8-1.6,1.6v45c0,3.7-0.6,5.9-4.1,5.9 c-4.1,0-10.3-3.2-15.7-6.8c-0.3-0.2-0.7-0.2-1.1,0c-0.4,0.2-0.6,0.6-0.6,1v5.2c0,0.4,0.2,0.7,0.5,0.9c0.7,0.5,8.3,5.9,17,5.9 c7.7,0,13-4.1,13-14.5V54.6z"/>
  <path fill="#742774" d="M70.1,14.5c0-0.8-0.8-1.6-1.6-1.6h-5.9c-0.8,0-1.6,0.8-1.6,1.6v39.4c0,10.4,5.3,14.5,13,14.5 c8.8,0,16.4-5.5,17-5.9c0.4-0.3,0.5-0.6,0.5-0.9v-5.2c0-0.4-0.2-0.8-0.6-1c-0.3-0.2-0.8-0.2-1.1,0c-5.4,3.7-11.7,6.8-15.7,6.8 c-3.5,0-4.1-2.1-4.1-5.9V14.5z"/>
</svg>`;

// Convert SVG to PNG using a data URL (simplified for this example)
const logoBase64 = Buffer.from(logoSvg).toString('base64');
const logoDataUrl = `data:image/svg+xml;base64,${logoBase64}`;

// Save the logo.png file
const logoPath = path.join(imagesDir, 'logo.png');
fs.writeFileSync(logoPath, logoSvg);
console.log(`Created file: ${logoPath}`);

// Create a simple favicon.ico (16x16 transparent pixel for demo purposes)
const faviconPath = path.join(imagesDir, 'favicon.ico');
const faviconData = Buffer.from([
  0x00, 0x00, 0x01, 0x00, 0x01, 0x00, 0x10, 0x10, 0x00, 0x00, 0x01, 0x00,
  0x04, 0x00, 0x28, 0x01, 0x00, 0x00, 0x16, 0x00, 0x00, 0x00, 0x28, 0x00,
  0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 0x00, 0x01, 0x00,
  0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x74, 0x27, 0x74, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
]);

fs.writeFileSync(faviconPath, faviconData);
console.log(`Created file: ${faviconPath}`);

console.log('Created required image files');